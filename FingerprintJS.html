<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FingerprintJS v4 指纹信息展示</title>
    <!-- 使用指定的 v4 版本 CDN -->
    <script src="https://openfpcdn.io/fingerprintjs/v4/iife.min.js"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.7;
            background-color: #f8f9fa;
            color: #333;
        }
        h1, h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 30px;
            margin-top: 20px;
        }
        .status-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f0f7ff;
            border-radius: 8px;
        }
        .visitor-id, .confidence-score {
            flex: 1;
            min-width: 300px;
        }
        .visitor-id strong, .confidence-score strong {
            color: #2c3e50;
        }
        .score-value {
            font-size: 1.2em;
            padding: 4px 10px;
            border-radius: 4px;
            display: inline-block;
            margin-left: 10px;
        }
        .score-high {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        .score-medium {
            background-color: #fff8e1;
            color: #ff8f00;
        }
        .score-low {
            background-color: #ffebee;
            color: #c62828;
        }
        .section {
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .section:hover {
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .section-header {
            background-color: #f5f7fa;
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .section-header .cn-name {
            color: #1976d2;
            margin-left: 10px;
            font-weight: normal;
            font-size: 0.9em;
            max-width: 70%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .section-content {
            padding: 20px;
            display: none;
            background-color: #fff;
        }
        .section.open .section-content {
            display: block;
        }
        .param {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee;
        }
        .param:last-child {
            border-bottom: none;
        }
        .param-name {
            font-weight: 600;
            color: #3949ab;
            margin-bottom: 5px;
        }
        .param-value {
            font-family: "SFMono-Regular", Consolas, monospace;
            word-wrap: break-word;
            color: #263238;
            padding: 10px;
            background-color: #fafafa;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        .json-debug {
            margin-top: 40px;
            padding: 20px;
            background-color: #2d2d2d;
            border-radius: 8px;
            color: #f0f0f0;
        }
        .json-debug h3 {
            color: #ffd700;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .json-pre {
            overflow-x: auto;
            font-family: "SFMono-Regular", Consolas, monospace;
            font-size: 0.9em;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .loading {
            text-align: center;
            padding: 60px;
            color: #666;
            font-size: 1.1em;
        }
        .error {
            text-align: center;
            padding: 60px;
            color: #dc3545;
            font-size: 1.1em;
        }
        .toggle-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0 5px;
        }
        .version-badge {
            display: inline-block;
            background-color: #e1f5fe;
            color: #0288d1;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>FingerprintJS 指纹信息展示 <span class="version-badge">v4 版本</span></h1>
    <div class="container">
        <div class="loading">正在获取指纹数据，请稍候...</div>
        
        <!-- 状态信息区 -->
        <div class="status-bar" style="display: none;">
            <div class="visitor-id">
                <strong>访客ID:</strong> <span id="visitorId"></span>
            </div>
            <div class="confidence-score">
                <strong>可信度评分:</strong> 
                <span id="confidenceScore" class="score-value"></span>
                <span id="scoreDescription"></span>
            </div>
        </div>
        
        <!-- 组件参数区 -->
        <div id="componentsContainer" style="display: none;"></div>
        
        <!-- 完整JSON数据区 -->
        <div class="json-debug" style="display: none;">
            <h3>完整调试数据 (componentsToDebugString)</h3>
            <pre class="json-pre" id="debugJson"></pre>
        </div>
    </div>

    <script>
        // 完整组件中文解释映射表（包含v4所有组件）
        const componentCnExplanations = {
            "fonts": "浏览器支持的字体列表，通过检测已安装字体生成指纹",
            "domBlockers": "检测广告拦截器等工具对DOM的修改行为",
            "fontPreferences": "浏览器字体偏好设置，反映用户字体配置",
            "audio": "音频处理特性指纹，通过音频API生成设备标识",
            "screenFrame": "屏幕边框尺寸，用于识别设备物理特性",
            "canvas": "Canvas绘图指纹，通过图形渲染差异生成唯一标识",
            "osCpu": "操作系统和CPU信息，包含系统版本和处理器架构",
            "languages": "浏览器语言设置，反映用户语言偏好和地区",
            "colorDepth": "屏幕颜色深度，显示设备色彩表现能力",
            "deviceMemory": "设备内存信息，反映设备硬件配置规格",
            "screenResolution": "屏幕分辨率，包含宽度和高度像素信息",
            "hardwareConcurrency": "CPU核心数量，反映设备处理能力",
            "timezone": "浏览器时区信息，反映用户所在地理时区",
            "sessionStorage": "检测浏览器是否支持sessionStorage存储",
            "localStorage": "检测浏览器是否支持localStorage本地存储",
            "indexedDB": "检测浏览器是否支持IndexedDB数据库功能",
            "openDatabase": "检测浏览器是否支持Web SQL数据库（多已废弃）",
            "cpuClass": "CPU类型标识，反映处理器类型（现代浏览器多不支持）",
            "platform": "设备平台信息，修正了iOS设备在桌面模式下的伪装值",
            "plugins": "浏览器安装的插件信息（现代浏览器多限制获取）",
            "touchSupport": "触摸设备支持信息，判断设备是否支持触摸操作",
            "vendor": "浏览器厂商标识，如Google、Apple、Mozilla等",
            "vendorFlavors": "浏览器特有全局变量，用于区分同内核不同浏览器",
            "cookiesEnabled": "检测浏览器是否启用Cookie功能",
            "colorGamut": "设备支持的色域范围，反映显示设备色彩能力",
            "invertedColors": "检测是否启用颜色反转模式（无障碍功能）",
            "forcedColors": "检测是否启用强制颜色模式（高对比度模式）",
            "monochrome": "检测是否为单色显示设备及单色位数",
            "contrast": "检测系统对比度设置（无障碍功能相关）",
            "reducedMotion": "检测是否启用减少动画效果（无障碍功能）",
            "reducedTransparency": "检测是否启用减少透明度（无障碍功能）",
            "hdr": "检测设备是否支持HDR（高动态范围）显示",
            "math": "数学函数计算结果指纹，反映JavaScript引擎差异",
            "pdfViewerEnabled": "检测浏览器是否内置PDF查看器",
            "architecture": "设备处理器架构，如x86、ARM等",
            "applePay": "检测设备是否支持Apple Pay支付功能",
            "privateClickMeasurement": "检测是否支持隐私点击测量（防追踪功能）",
            "audioBaseLatency": "音频基础延迟，反映设备音频处理性能",
            "dateTimeLocale": "日期时间本地化设置，反映地区偏好",
            "webGlBasics": "WebGL基础信息，包括渲染器、供应商和版本等",
            "webGlExtensions": "WebGL支持的扩展列表，反映图形设备能力"
        };

        // 加载FingerprintJS v4并获取数据
        FingerprintJS.load().then(fp => {
            fp.get().then(result => {
                // 隐藏加载提示，显示内容
                document.querySelector('.loading').style.display = 'none';
                document.querySelector('.status-bar').style.display = 'flex';
                document.getElementById('componentsContainer').style.display = 'block';
                document.querySelector('.json-debug').style.display = 'block';

                // 显示访客ID
                document.getElementById('visitorId').textContent = result.visitorId;

                // 处理可信度评分（v4版本中confidence可能为0-1的数值）
                const confidenceScore = result.confidence?.score || 0; // 兼容可能的结构差异
                const scoreEl = document.getElementById('confidenceScore');
                const scoreDescEl = document.getElementById('scoreDescription');
                
                scoreEl.textContent = confidenceScore.toFixed(2);
                // 根据评分设置样式和描述
                if (confidenceScore >= 0.7) {
                    scoreEl.className = 'score-value score-high';
                    scoreDescEl.textContent = '（高可信度，极可能为真人访问）';
                } else if (confidenceScore >= 0.3) {
                    scoreEl.className = 'score-value score-medium';
                    scoreDescEl.textContent = '（中等可信度，可能为真人访问）';
                } else {
                    scoreEl.className = 'score-value score-low';
                    scoreDescEl.textContent = '（低可信度，可能为机器人或模拟环境）';
                }

                // 显示完整调试JSON（v4版本的方法调用）
                document.getElementById('debugJson').textContent = 
                    FingerprintJS.componentsToDebugString(result.components);

                // 遍历所有组件并显示
                const container = document.getElementById('componentsContainer');
                // 将组件按字母顺序排序，便于查找
                const sortedComponents = Object.entries(result.components).sort((a, b) => 
                    a[0].localeCompare(b[0])
                );

                sortedComponents.forEach(([componentName, componentData]) => {
                    // 创建组件区块
                    const section = document.createElement('div');
                    section.className = 'section';
                    
                    // 组件标题（包含中文解释）
                    const header = document.createElement('div');
                    header.className = 'section-header';
                    const cnName = componentCnExplanations[componentName] || '未知组件';
                    header.innerHTML = `
                        <span>
                            ${componentName}
                            <span class="cn-name">(${cnName})</span>
                        </span>
                        <button class="toggle-btn">+</button>
                    `;
                    
                    // 点击展开/折叠
                    header.addEventListener('click', () => {
                        section.classList.toggle('open');
                        const btn = header.querySelector('.toggle-btn');
                        btn.textContent = section.classList.contains('open') ? '-' : '+';
                    });
                    
                    // 组件内容
                    const content = document.createElement('div');
                    content.className = 'section-content';
                    
                    // 组件数据详情
                    const param = document.createElement('div');
                    param.className = 'param';
                    
                    const paramName = document.createElement('div');
                    paramName.className = 'param-name';
                    paramName.textContent = '组件数据:';
                    
                    const paramValue = document.createElement('div');
                    paramValue.className = 'param-value';
                    paramValue.textContent = JSON.stringify(componentData, null, 2);
                    
                    param.appendChild(paramName);
                    param.appendChild(paramValue);
                    content.appendChild(param);
                    
                    // 组装区块
                    section.appendChild(header);
                    section.appendChild(content);
                    container.appendChild(section);
                });

                // 默认展开前5个组件，方便快速查看
                // const firstSections = document.querySelectorAll('.section');
                // for (let i = 0; i < Math.min(5, firstSections.length); i++) {
                //     firstSections[i].classList.add('open');
                //     firstSections[i].querySelector('.toggle-btn').textContent = '-';
                // }

            }).catch(error => {
                document.querySelector('.loading').className = 'error';
                document.querySelector('.error').textContent = `获取数据失败: ${error.message}`;
            });
        });
    </script>
</body>
</html>
<script defer src="https://analytics.123408.xyz/tracker.min.js" data-website-id="123xiao-浏览器指纹信息"></script>